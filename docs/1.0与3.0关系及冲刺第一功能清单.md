# ROX Quant：1.0 与 3.0 关系 + 冲刺「行业第一」功能清单

---

## 一、1.0 和 3.0 是「两个软件」还是「融为一体」？

**结论：融为一体的同一套软件，只是两个入口、两套 UI。**

| 维度 | 说明 |
|------|------|
| **后端** | 同一套 FastAPI 应用（`app.main:app`），同一套 API（`/api/market/*`、`/api/stock/*`、`/api/trade/*` 等）。 |
| **端口** | 同一端口（默认 8081），同一进程。 |
| **入口** | **1.0 风格**：`/` → `index_rox1.html`（市场看板、宏观、每周推荐、个股诊断、知识库、交易、社区、系统）；**3.0 专业版**：`/pro` → `index.html`（三栏紧凑、图表、策略、专业量化）。 |
| **数据与逻辑** | 共用数据库、共用行情/回测/交易/AI 等所有服务；1.0 壳子调用的是 3.0 的 API。 |

所以：**不是两个独立软件**，而是「**一个产品、两种界面**」——经典版（1.0 壳）面向综合看盘与诊断，专业版（3.0）面向量化与策略，底层能力完全共享。

---

## 二、要「吊打市面同类、拿第一」还缺什么？

对标同花顺/东方财富/通达信、以及聚宽/米筐/掘金等量化平台，按「必备 → 差异化 → 加分项」整理如下。

---

### 第一档：必备（没有就谈不上「第一」）

| 序号 | 功能缺口 | 现状 | 竞品普遍能力 | 建议动作 |
|------|----------|------|----------------|----------|
| 1 | **实盘交易主流程** | 仅 SQLite 模拟单，执行器未接入主流程 | 多券商/模拟+实盘切换、下单/撤单/查询 | 在 `POST /api/trade/open` 等主流程接入 `TradeExecutor`，做「模拟/实盘」开关；至少对接 1 家券商或统一接入层（如 XTP/华锐） |
| 2 | **条件单（价格/时间触发）** | 仅有市价开平，无条件单 | 限价单、止损单、止盈单、时间条件单 | 条件单表与 API 已有雏形，需补齐：创建/撤销/查询条件单，以及**执行层**在行情/定时触发时真实下单或模拟执行 |
| 3 | **统一风控执行** | 回测/专业版有风控逻辑，交易 API 不执行 | 止损/止盈/单笔/总仓位校验并执行 | 在交易开平接口中集成风控校验（仓位、止损止盈），并在执行层真正触发平仓/拒单 |
| 4 | **Level2 真实度** | `/api/market/level2-sim` 为随机模拟 | 真实五档/十档、逐笔或至少标注数据源 | 接入付费 Level2 或券商接口；若暂不接，前端/文档**明确标注「模拟」**，避免误导 |
| 5 | **回测与实盘一致性** | 回测 API 已挂载，策略与实盘割裂 | 同一策略可回测→模拟→实盘一键切换 | 策略 ID/配置统一，回测结果与模拟/实盘共用同一套参数与风控，便于「回测通过再上实盘」 |

---

### 第二档：差异化（有才能拉开身位）

| 序号 | 功能缺口 | 现状 | 竞品普遍能力 | 建议动作 |
|------|----------|------|----------------|----------|
| 6 | **AI 复盘与总结** | `/api/trade/review` 仅统计，未接 LLM | 多为人工复盘或简单统计 | 接入 LLM：按日/周/月根据成交列表生成「复盘摘要 + 改进建议」，并可导出；可做成 ROX 的**招牌能力** |
| 7 | **选股/筛选器易用性** | 有 `screen`、`screen-with-ai`，前端偏专业 | 图形化条件选股、保存方案、定时跑 | 1.0 或 3.0 增加「选股器」页：条件勾选 + 保存为方案 + 一键执行 + AI 总结结果，降低门槛 |
| 8 | **多账户/组合管理** | 账户与持仓偏单账户 | 多账户、组合视图、收益归因 | 账户维度扩展：多账户列表、按组合/策略分组持仓与收益，为实盘与跟单打基础 |
| 9 | **提醒与预警** | 基本没有 | 价格预警、指标预警、到价/拐点通知 | 预警规则表 + 定时/行情驱动检查；通知方式：站内 + 可选邮件/微信（需合规） |
| 10 | **数据质量与稳定性** | 多源但无统一健康与降级策略 | 行情源切换、延迟监控、熔断 | 行情源健康检查、自动降级（如东方财富→新浪→静态列表）；关键接口熔断与重试，并在前端展示「数据状态」 |

---

### 第三档：加分项（有则更强）

| 序号 | 功能缺口 | 现状 | 竞品普遍能力 | 建议动作 |
|------|----------|------|----------------|----------|
| 11 | **社区/跟单真实化** | 社区为示例数据 | 实盘晒单、跟单、合规披露 | 若要做「社区」：用户发帖/跟单存储、合规披露、风控；否则保持「示例」并注明，避免误导 |
| 12 | **移动端/响应式** | 以桌面为主 | 自适应或独立 H5/App | 关键页（行情、诊断、交易）做响应式或轻量 H5，便于手机查看与简单操作 |
| 13 | **知识库与投教** | 本地+联网搜索，静态为主 | 课程、研报、问答 | 知识库增量/版本管理；可选接研报或投教内容，与 AI 问答结合 |
| 14 | **合规与审计** | 基础日志 | 操作审计、风控留痕、合规报告 | 关键操作（下单、改参、清缓存）写审计日志；实盘前需满足券商与监管要求 |
| 15 | **测试与交付质量** | 回测/专业版有测，交易与市场 API 覆盖不足 | 契约测试、E2E、压测 | 交易/市场核心 API 契约测试；关键路径 E2E；发布前基础压测与回归 |

---

## 三、优先级与落地顺序建议

- **先做第一档 1～5**：实盘主流程、条件单、风控执行、Level2 标注或真实、回测与实盘一致。做完才有资格和「同类软件」站在同一赛道。
- **再做第二档 6～10**：AI 复盘、选股器易用、多账户/组合、预警、数据质量。这些是「拉开身位、拿第一」的关键。
- **第三档 11～15**：按资源与定位选做（社区/移动/投教/合规/测试），提升完整度与可信度。

当前代码里已有不少基础（回测 API 已挂载、条件单表与接口雏形、AI 多模型、个股诊断与单股拉取等），**重点是把「交易主流程 + 条件单 + 风控执行」打通，并把「AI 复盘 + 选股器体验 + 数据质量」做亮**，再配合 Level2 与实盘对接，就有机会在细分场景里做到「第一」。

---

*文档基于现有功能缺失报告与竞品能力整理，便于产品与研发对齐「冲刺第一」的缺口与顺序。*
