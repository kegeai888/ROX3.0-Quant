# AI 大模型 API 配置说明

项目使用 **OpenAI 兼容** 的大模型接口，用于以下功能。配置同一套 **API_KEY** 和 **BASE_URL** 即可。

## 一、该 API 用在哪些地方

| 功能 | 入口 | 说明 |
|------|------|------|
| **AI 聊天** | 3.0 专业版「AI 投研」、1.0 知识库搜索（联网） | 对话 + 可选联网搜索，模型：deepseek-chat |
| **个股诊断中的 AI 分析** | 1.0「个股诊断」→ 获取行情并诊断 | 根据行情与技术指标生成综合得分、结论、律动建议 |
| **每日市场简报** | 1.0「市场看板」顶部「每日 AI 市场总结」 | 根据指数、涨跌统计、资讯生成简短收盘简报 |

以上均通过 `app/rox_quant/llm.py` 的 `AIClient` 调用，统一使用你配置的 **AI_API_KEY** 和 **AI_BASE_URL**。

## 二、如何配置

1. 在项目根目录创建或编辑 **`.env`**（可复制 `.env.example` 再改）。
2. 增加或修改：

```env
# AI 大模型（OpenAI 兼容）
AI_API_KEY=你的API密钥
AI_BASE_URL=https://tb.api.mkeai.com
```

- **AI_BASE_URL** 可不带 `/v1`，程序会自动补上。
- **不要** 把真实 key 提交到 Git；`.env` 已在 `.gitignore` 中忽略。

3. 重启服务后，上述 AI 功能会使用该接口。

## 三、安全说明

- API Key 仅从环境变量（`.env` 或系统环境）读取，**不要写死在代码里**。
- 若未配置或 key 无效，AI 聊天会提示「请配置 AI_API_KEY 与 AI_BASE_URL」，个股诊断与每日简报会退回本地/默认逻辑或简短提示。
